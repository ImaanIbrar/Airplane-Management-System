/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package out.production.airlaib;

import javax.swing.*;
import java.awt.event.ActionEvent;
import java.sql.*;
import javax.swing.GroupLayout.Alignment;
import javax.swing.LayoutStyle.ComponentPlacement;
import javax.swing.text.JTextComponent;

import java.awt.Component;
import java.awt.Font;

/**
 * The cancels class represents a GUI application for canceling flight tickets
 * by ID.
 *
 * @author Marriam Naeem
 * @version 1.0
 * @since 2022-06-12
 */

public class cancels extends javax.swing.JFrame {

        /**
         * Creates a new instance of the cancels class.
         */
        public cancels() {
                initComponents();
                setExtendedState(JFrame.MAXIMIZED_BOTH);
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated
        // Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                panel1 = new javax.swing.JPanel();
                panel2 = new javax.swing.JPanel();
                cancelBookingLabel = new javax.swing.JLabel();
                panel3 = new javax.swing.JPanel();
                contactUsLabel = new javax.swing.JLabel();
                numberLabel = new javax.swing.JLabel();
                backgroundAdjustLabel2 = new javax.swing.JLabel();
                backgroundAdjustLabel3 = new javax.swing.JLabel();
                jskyIcon = new javax.swing.JLabel();
                instaIcon = new javax.swing.JLabel();
                linkedInIcon = new javax.swing.JLabel();
                instructionLabel = new javax.swing.JLabel();
                idTextField = new javax.swing.JTextField();
                proceedBtn = new javax.swing.JButton();
                backBtn = new javax.swing.JButton();
                backgroundAdjustLabel1 = new javax.swing.JLabel();

                setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

                panel1.setBackground(new java.awt.Color(162, 209, 209));

                panel2.setBackground(new java.awt.Color(0, 102, 102));

                cancelBookingLabel.setFont(new Font("Segoe UI", Font.BOLD, 35)); // NOI18N
                cancelBookingLabel.setForeground(new java.awt.Color(255, 255, 255));
                cancelBookingLabel.setText("CANCEL BOOKING");

                backgroundAdjustLabel1.setFont(new java.awt.Font("Segoe UI", 1, 24)); // NOI18N
                backgroundAdjustLabel1.setForeground(new java.awt.Color(255, 255, 255));

                javax.swing.GroupLayout groupLayoutPanel2 = new javax.swing.GroupLayout(panel2);
                groupLayoutPanel2.setHorizontalGroup(
                                groupLayoutPanel2.createParallelGroup(Alignment.TRAILING)
                                                .addGroup(groupLayoutPanel2.createSequentialGroup()
                                                                .addContainerGap(613, Short.MAX_VALUE)
                                                                .addComponent(cancelBookingLabel,
                                                                                GroupLayout.PREFERRED_SIZE, 372,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addGap(555)));
                groupLayoutPanel2.setVerticalGroup(
                                groupLayoutPanel2.createParallelGroup(Alignment.TRAILING)
                                                .addGroup(groupLayoutPanel2.createSequentialGroup()
                                                                .addContainerGap(31, Short.MAX_VALUE)
                                                                .addComponent(cancelBookingLabel)
                                                                .addGap(27)));
                panel2.setLayout(groupLayoutPanel2);

                panel3.setBackground(new java.awt.Color(0, 102, 102));

                contactUsLabel.setFont(new Font("Segoe UI", Font.BOLD, 20)); // NOI18N
                contactUsLabel.setForeground(new java.awt.Color(255, 255, 255));
                contactUsLabel.setText("CONTACT US");
                contactUsLabel.setToolTipText("");

                numberLabel.setFont(new java.awt.Font("Segoe UI Light", 1, 14)); // NOI18N
                numberLabel.setForeground(new java.awt.Color(255, 255, 255));
                numberLabel.setText("+51 789543");

                jskyIcon.setIcon(
                                new javax.swing.ImageIcon(getClass().getResource("/Screenshot 2022-07-06 000042.png"))); // NOI18N

                instaIcon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/insta.png"))); // NOI18N

                linkedInIcon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/twit.png"))); // NOI18N

                javax.swing.GroupLayout groupLayoutPanel3 = new javax.swing.GroupLayout(panel3);
                groupLayoutPanel3.setHorizontalGroup(
                                groupLayoutPanel3.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addGap(19)
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(numberLabel)
                                                                                                .addPreferredGap(
                                                                                                                ComponentPlacement.RELATED,
                                                                                                                169,
                                                                                                                Short.MAX_VALUE))
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(contactUsLabel,
                                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                                153,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addGap(90)))
                                                                .addComponent(backgroundAdjustLabel2)
                                                                .addPreferredGap(ComponentPlacement.RELATED, 810,
                                                                                Short.MAX_VALUE)
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.TRAILING)
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(linkedInIcon)
                                                                                                .addGap(18)
                                                                                                .addComponent(instaIcon)
                                                                                                .addGap(18)
                                                                                                .addComponent(jskyIcon)
                                                                                                .addGap(48))
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(backgroundAdjustLabel3)
                                                                                                .addGap(203)))));
                groupLayoutPanel3.setVerticalGroup(
                                groupLayoutPanel3.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(backgroundAdjustLabel2)
                                                                .addPreferredGap(ComponentPlacement.RELATED, 12,
                                                                                Short.MAX_VALUE)
                                                                .addComponent(contactUsLabel)
                                                                .addPreferredGap(ComponentPlacement.RELATED)
                                                                .addComponent(numberLabel)
                                                                .addContainerGap(15, Short.MAX_VALUE))
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.TRAILING)
                                                                                .addComponent(linkedInIcon)
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(backgroundAdjustLabel3)
                                                                                                .addGap(18)
                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.TRAILING)
                                                                                                                .addComponent(instaIcon)
                                                                                                                .addComponent(jskyIcon))))
                                                                .addGap(0, 15, Short.MAX_VALUE)));
                panel3.setLayout(groupLayoutPanel3);

                instructionLabel.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
                instructionLabel.setText("PLEASE ENTER YOUR ID:");

                proceedBtn.setBackground(new java.awt.Color(0, 51, 51));
                proceedBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                proceedBtn.setForeground(new java.awt.Color(255, 255, 255));
                proceedBtn.setText("PROCEED");
                proceedBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                proceedBtnAction(evt);
                        }
                });

                backBtn.setBackground(new java.awt.Color(0, 51, 51));
                backBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                backBtn.setForeground(new java.awt.Color(255, 255, 255));
                backBtn.setText("BACK");
                backBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                backBtnAction(evt);
                        }
                });

                javax.swing.GroupLayout groupLayoutPanel1 = new javax.swing.GroupLayout(panel1);
                groupLayoutPanel1.setHorizontalGroup(
                                groupLayoutPanel1.createParallelGroup(Alignment.LEADING)
                                                .addComponent(panel2, GroupLayout.PREFERRED_SIZE, 686, Short.MAX_VALUE)
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addGap(210)
                                                                .addComponent(backgroundAdjustLabel1,
                                                                                GroupLayout.PREFERRED_SIZE, 400,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(924, Short.MAX_VALUE))
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addGap(519)
                                                                .addComponent(instructionLabel,
                                                                                GroupLayout.PREFERRED_SIZE, 222,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addGap(18)
                                                                .addComponent(idTextField, GroupLayout.PREFERRED_SIZE,
                                                                                132, GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(643, Short.MAX_VALUE))
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addGap(53)
                                                                .addComponent(backBtn, GroupLayout.PREFERRED_SIZE, 142,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(1339, Short.MAX_VALUE))
                                                .addGroup(Alignment.TRAILING, groupLayoutPanel1.createSequentialGroup()
                                                                .addContainerGap(831, Short.MAX_VALUE)
                                                                .addComponent(proceedBtn, GroupLayout.PREFERRED_SIZE,
                                                                                142, GroupLayout.PREFERRED_SIZE)
                                                                .addGap(561))
                                                .addComponent(panel3, GroupLayout.DEFAULT_SIZE, 1540, Short.MAX_VALUE));
                groupLayoutPanel1.setVerticalGroup(
                                groupLayoutPanel1.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addComponent(panel2, GroupLayout.PREFERRED_SIZE,
                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addGap(44)
                                                                .addComponent(backBtn, GroupLayout.PREFERRED_SIZE, 40,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addGap(92)
                                                                .addGroup(groupLayoutPanel1
                                                                                .createParallelGroup(Alignment.BASELINE)
                                                                                .addComponent(instructionLabel)
                                                                                .addComponent(idTextField,
                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                GroupLayout.PREFERRED_SIZE))
                                                                .addGap(41)
                                                                .addComponent(proceedBtn, GroupLayout.PREFERRED_SIZE,
                                                                                40, GroupLayout.PREFERRED_SIZE)
                                                                .addGap(79)
                                                                .addComponent(backgroundAdjustLabel1)
                                                                .addPreferredGap(ComponentPlacement.RELATED, 225,
                                                                                Short.MAX_VALUE)
                                                                .addComponent(panel3, GroupLayout.PREFERRED_SIZE, 103,
                                                                                GroupLayout.PREFERRED_SIZE)));
                panel1.setLayout(groupLayoutPanel1);

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
                layout.setHorizontalGroup(
                                layout.createParallelGroup(Alignment.LEADING)
                                                .addComponent(panel1, GroupLayout.DEFAULT_SIZE, 1540, Short.MAX_VALUE));
                layout.setVerticalGroup(
                                layout.createParallelGroup(Alignment.LEADING)
                                                .addComponent(panel1, GroupLayout.DEFAULT_SIZE, 795, Short.MAX_VALUE));
                getContentPane().setLayout(layout);

                pack();
        }// </editor-fold>//GEN-END:initComponents

        /**
         * Handles the action when the "Back" button is clicked.
         *
         * @param evt The action event.
         */

        private void backBtnAction(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_backBtnAction
                super.dispose();
                cusDomainObj = new cusdomain();
                cusDomainObj.setVisible(true);
        }

        /**
         * Handles the action when the "Proceed" button is clicked. It attempts to
         * delete a ticket record from the database.
         *
         * @param evt The action event.
         * @throws SQLException           If a SQL exception occurs.
         * @throws ClassNotFoundException If the MySQL JDBC driver class is not found.
         */
        public void proceedBtnAction(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_proceedBtnAction
                Connection con;
                PreparedStatement pst;
                String id = idTextField.getText();
                System.out.println(id);
                try {
                        con = connectionManager.getConnection();
                        pst = con.prepareStatement("SELECT * from ticket where id= ?");

                        pst.setString(1, id);
                        ResultSet rs = pst.executeQuery();
                        if (rs.next() == false) {
                                JOptionPane.showMessageDialog(this, "Record not Found");
                                showMessageDialogMessage = "Record not Found";
                        } else {
                                pst = con.prepareStatement("DELETE from ticket where id= ?");
                                pst.setString(1, id);
                                pst.executeUpdate();
                                proceedBtn.setEnabled(false);
                                backgroundAdjustLabel1.setText("RECORD DELETED SUCCESSFULLY");
                        }
                } catch (SQLException excep) {
                        excep.printStackTrace();
                } catch (Exception excep) {
                        excep.printStackTrace();
                }
        }

        // GEN-LAST:event_proceedBtnAction

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JButton proceedBtn;
        private javax.swing.JButton backBtn;
        private javax.swing.JLabel cancelBookingLabel;
        private javax.swing.JLabel contactUsLabel;
        private javax.swing.JLabel instructionLabel;
        private javax.swing.JLabel backgroundAdjustLabel2;
        private javax.swing.JLabel numberLabel;
        private javax.swing.JLabel backgroundAdjustLabel3;
        private javax.swing.JLabel jskyIcon;
        private javax.swing.JLabel instaIcon;
        private javax.swing.JLabel linkedInIcon;
        private javax.swing.JLabel backgroundAdjustLabel1;
        private javax.swing.JPanel panel1;
        private javax.swing.JPanel panel2;
        private javax.swing.JPanel panel3;
        private javax.swing.JTextField idTextField;
        private cusdomain cusDomainObj;
        private String showMessageDialogMessage;
        // End of variables declaration//GEN-END:variables
		
        public void setConnection(Connection mockConnection) throws SQLException {
			mockConnection = connectionManager.getConnection();	
		}

		public javax.swing.JTextField getIdTextField() {
			// TODO Auto-generated method stub
			return idTextField;
		}
		
		public String getShowMessageDialogMessage() {
	        return showMessageDialogMessage;
	    }

		public javax.swing.JButton getProceedBtn() {
			// TODO Auto-generated method stub
			return proceedBtn;
		}

		public javax.swing.JLabel getBackgroundAdjustLabel1() {
			// TODO Auto-generated method stub
			return backgroundAdjustLabel1;
		}
}