package out.production.airlaib;

import java.awt.event.ActionEvent;
import java.util.Calendar;
import java.util.Date;
import com.toedter.calendar.JDateChooser;

import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.table.DefaultTableModel;
import javax.swing.GroupLayout.Alignment;
import javax.swing.JComboBox;
import javax.swing.DefaultComboBoxModel;
import javax.swing.GroupLayout;
import javax.swing.LayoutStyle.ComponentPlacement;
import java.awt.Font;
import java.awt.Color;

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * This class represents a GUI application for booking airline tickets.
 * It allows users to search for customers, view available flights, and book
 * tickets.
 *
 * @author Marriam Naeem
 * @version 1.0
 * @since 2022-10-21
 */
public class ticket extends javax.swing.JFrame {

        /**
         * Creates new form ticket
         */
        public ticket() {
                getContentPane().setBackground(new Color(151, 190, 190));
                initComponents();
                autoID();
                setExtendedState(JFrame.MAXIMIZED_BOTH);
        }

        Connection con;
        PreparedStatement pst;

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated
        // Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                panel5 = new javax.swing.JPanel();
                findMyFlightLabel = new javax.swing.JLabel();
                panel6 = new javax.swing.JPanel();
                customerIdLabel = new javax.swing.JLabel();
                scrollPane1 = new javax.swing.JScrollPane();
                ticketTable = new javax.swing.JTable();
                panel1 = new javax.swing.JPanel();
                txtsource = new javax.swing.JComboBox<>();
                txtdepart = new javax.swing.JComboBox<>();
                sourceLabel = new javax.swing.JLabel();
                departureLabel = new javax.swing.JLabel();
                seachBtn = new javax.swing.JButton();
                txtdate = new com.toedter.calendar.JDateChooser();
                disablePastDates(txtdate);
                dateLabel = new javax.swing.JLabel();
                panel3 = new javax.swing.JPanel();
                firstNameLabel = new javax.swing.JLabel();
                LastNameLabel = new javax.swing.JLabel();
                passportNoLabel = new javax.swing.JLabel();
                txtfirstname = new javax.swing.JLabel();
                txtlastname = new javax.swing.JLabel();
                txtpassport = new javax.swing.JLabel();
                txtticketno = new javax.swing.JLabel();
                ticketNoLabel = new javax.swing.JLabel();
                panel2 = new javax.swing.JPanel();
                flightNoLabel = new javax.swing.JLabel();
                flightNameLabel = new javax.swing.JLabel();
                departureTimeLabel = new javax.swing.JLabel();
                classLabel = new javax.swing.JLabel();
                priceLabel = new javax.swing.JLabel();
                seatsLabel = new javax.swing.JLabel();
                flightno = new javax.swing.JLabel();
                flightnamelabel = new javax.swing.JLabel();
                txtdept = new javax.swing.JLabel();
                txtclass = new javax.swing.JComboBox<>();
                txtprice = new javax.swing.JLabel();
                txtseats = new javax.swing.JSpinner();
                txtcustid = new javax.swing.JTextField();
                searchBtn = new javax.swing.JButton();
                noteLabel = new javax.swing.JLabel();
                panel7 = new javax.swing.JPanel();
                contactUsLabel = new javax.swing.JLabel();
                numberLabel = new javax.swing.JLabel();
                adjustBackgroundLabel1 = new javax.swing.JLabel();
                adjustBackgroundLabel2 = new javax.swing.JLabel();
                jskyIcon = new javax.swing.JLabel();
                instaIcon = new javax.swing.JLabel();
                linkedInIcon = new javax.swing.JLabel();
                txtseats.setEnabled(false);
                txtclass.setEnabled(false);
                txtsource.setEnabled(false);
                txtdepart.setEnabled(false);
                seachBtn.setEnabled(false);
                txtdate.setEnabled(false);

                setBackground(new java.awt.Color(153, 188, 188));

                panel5.setBackground(new java.awt.Color(0, 102, 102));

                findMyFlightLabel.setFont(new Font("Palatino Linotype", Font.BOLD, 35)); // NOI18N
                findMyFlightLabel.setForeground(new java.awt.Color(255, 255, 255));
                findMyFlightLabel.setText("FIND MY FLIGHT");

                javax.swing.GroupLayout groupLayoutPanel5 = new javax.swing.GroupLayout(panel5);
                groupLayoutPanel5.setHorizontalGroup(
                                groupLayoutPanel5.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel5.createSequentialGroup()
                                                                .addGap(604)
                                                                .addComponent(findMyFlightLabel)
                                                                .addContainerGap(620, Short.MAX_VALUE)));
                groupLayoutPanel5.setVerticalGroup(
                                groupLayoutPanel5.createParallelGroup(Alignment.TRAILING)
                                                .addGroup(groupLayoutPanel5.createSequentialGroup()
                                                                .addContainerGap(34, Short.MAX_VALUE)
                                                                .addComponent(findMyFlightLabel)
                                                                .addGap(26)));
                panel5.setLayout(groupLayoutPanel5);

                panel6.setBackground(new java.awt.Color(146, 190, 190));

                customerIdLabel.setFont(new Font("Segoe UI Emoji", Font.BOLD, 19)); // NOI18N
                customerIdLabel.setText("Customer ID");

                ticketTable.setModel(new javax.swing.table.DefaultTableModel(
                                new Object[][] {

                                },
                                new String[] {
                                                "Flight No", "Flight Name", "Source", "Departure", "DepTime", "ArrTime",
                                                "Charge"
                                }));
                ticketTable.addMouseListener(new java.awt.event.MouseAdapter() {
                        public void mouseClicked(java.awt.event.MouseEvent evt) {
                                flightsTableMouseClicked(evt);
                        }
                });
                scrollPane1.setViewportView(ticketTable);

                panel1.setBackground(new java.awt.Color(151, 190, 190));

                txtsource.setModel(new javax.swing.DefaultComboBoxModel<>(
                                new String[] { "Pakistan", "Srilanka", "Uk", "Usa", "Canada", "China" }));

                txtdepart.setModel(new javax.swing.DefaultComboBoxModel<>(
                                new String[] { "Pakistan", "Srilanka", "Uk", "Usa", "Canada", "China" }));

                sourceLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                sourceLabel.setText("Source");

                departureLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                departureLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
                departureLabel.setText("Departure");

                seachBtn.setBackground(new java.awt.Color(0, 51, 51));
                seachBtn.setForeground(new java.awt.Color(255, 255, 255));
                seachBtn.setText("Search");
                seachBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                checkAvailableFlightBtnAction(evt);
                        }
                });

                dateLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                dateLabel.setText("Date");

                javax.swing.GroupLayout groupLayoutPanel1 = new javax.swing.GroupLayout(panel1);
                panel1.setLayout(groupLayoutPanel1);
                groupLayoutPanel1.setHorizontalGroup(
                                groupLayoutPanel1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addGroup(groupLayoutPanel1.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(departureLabel)
                                                                                .addComponent(sourceLabel)
                                                                                .addGroup(groupLayoutPanel1
                                                                                                .createSequentialGroup()
                                                                                                .addGroup(groupLayoutPanel1
                                                                                                                .createParallelGroup(
                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING,
                                                                                                                                false)
                                                                                                                .addComponent(txtsource,
                                                                                                                                0,
                                                                                                                                173,
                                                                                                                                Short.MAX_VALUE)
                                                                                                                .addComponent(txtdepart,
                                                                                                                                0,
                                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                                Short.MAX_VALUE))
                                                                                                .addGroup(groupLayoutPanel1
                                                                                                                .createParallelGroup(
                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                .addGroup(groupLayoutPanel1
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addGap(43, 43, 43)
                                                                                                                                .addComponent(seachBtn))
                                                                                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                                                groupLayoutPanel1
                                                                                                                                                .createSequentialGroup()
                                                                                                                                                .addPreferredGap(
                                                                                                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                                                                                                58,
                                                                                                                                                                Short.MAX_VALUE)
                                                                                                                                                .addGroup(groupLayoutPanel1
                                                                                                                                                                .createParallelGroup(
                                                                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                                                                .addComponent(dateLabel)
                                                                                                                                                                .addComponent(txtdate,
                                                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                                                                                146,
                                                                                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))))))
                                                                .addContainerGap(241, Short.MAX_VALUE)));
                groupLayoutPanel1.setVerticalGroup(
                                groupLayoutPanel1.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel1.createSequentialGroup()
                                                                .addGap(38, 38, 38)
                                                                .addGroup(groupLayoutPanel1.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                .addComponent(sourceLabel)
                                                                                .addComponent(dateLabel))
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                                .addGroup(groupLayoutPanel1.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                                                                .addComponent(txtsource,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(txtdate,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(21, 21, 21)
                                                                .addComponent(departureLabel)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)
                                                                .addGroup(groupLayoutPanel1.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(txtdepart,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(seachBtn))
                                                                .addGap(40, 40, 40)));

                panel3.setBackground(new java.awt.Color(151, 190, 190));

                firstNameLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                firstNameLabel.setText("FirstName");

                LastNameLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                LastNameLabel.setText("LastName");

                passportNoLabel.setFont(new java.awt.Font("Segoe UI Emoji", 1, 14)); // NOI18N
                passportNoLabel.setText("Passport Number");

                txtfirstname.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
                txtfirstname.setForeground(new java.awt.Color(255, 0, 0));

                txtlastname.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
                txtlastname.setForeground(new java.awt.Color(255, 0, 0));

                txtpassport.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
                txtpassport.setForeground(new java.awt.Color(255, 0, 0));

                txtticketno.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
                txtticketno.setForeground(new java.awt.Color(255, 0, 0));

                ticketNoLabel.setText("Ticket No");

                panel2.setBackground(new java.awt.Color(151, 190, 190));

                flightNoLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                flightNoLabel.setText("Flight no");

                flightNameLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                flightNameLabel.setText("Filght Name");

                departureTimeLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                departureTimeLabel.setText("Departure Time");

                classLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                classLabel.setText("Class");

                priceLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                priceLabel.setText("Price");

                seatsLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                seatsLabel.setText("Seats");

                flightno.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
                flightno.setForeground(new java.awt.Color(255, 0, 0));

                flightnamelabel.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
                flightnamelabel.setForeground(new java.awt.Color(255, 0, 0));

                txtdept.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
                txtdept.setForeground(new java.awt.Color(255, 0, 0));

                txtclass.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Economy", "Business" }));

                txtclass.addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent evt) {
                                txtclassStateChanged(evt);
                        }
                });

                txtseats.addChangeListener(new ChangeListener() {
                        public void stateChanged(ChangeEvent evt) {
                                txtseatsStateChanged(evt);
                        }
                });

                javax.swing.GroupLayout groupLayoutPanel2 = new javax.swing.GroupLayout(panel2);
                panel2.setLayout(groupLayoutPanel2);
                groupLayoutPanel2.setHorizontalGroup(
                                groupLayoutPanel2.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel2.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(flightNameLabel)
                                                                                .addComponent(flightNoLabel)
                                                                                .addComponent(departureTimeLabel)
                                                                                .addComponent(classLabel)
                                                                                .addComponent(priceLabel)
                                                                                .addComponent(seatsLabel))
                                                                .addGap(21, 21, 21)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(flightnamelabel)
                                                                                .addComponent(flightno)
                                                                                .addComponent(txtdept)
                                                                                .addComponent(txtclass,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                116,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(txtprice,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                116,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addGroup(groupLayoutPanel2
                                                                                                .createSequentialGroup()
                                                                                                .addGap(6, 6, 6)
                                                                                                .addComponent(txtseats,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                64,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)))
                                                                .addContainerGap(157, Short.MAX_VALUE)));
                groupLayoutPanel2.setVerticalGroup(
                                groupLayoutPanel2.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel2.createSequentialGroup()
                                                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                groupLayoutPanel2
                                                                                                                .createSequentialGroup()
                                                                                                                .addComponent(flightNoLabel)
                                                                                                                .addGap(28, 28, 28))
                                                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                groupLayoutPanel2
                                                                                                                .createSequentialGroup()
                                                                                                                .addComponent(flightno)
                                                                                                                .addGap(18, 18, 18)))
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(flightNameLabel)
                                                                                .addComponent(flightnamelabel))
                                                                .addGap(31, 31, 31)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(departureTimeLabel)
                                                                                .addComponent(txtdept))
                                                                .addGap(23, 23, 23)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(classLabel)
                                                                                .addComponent(txtclass,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addGap(18, 18, 18)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(priceLabel)
                                                                                .addComponent(txtprice,
                                                                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                                .addGroup(groupLayoutPanel2.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                                                .addComponent(txtseats,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(seatsLabel))));
                BookBtn = new javax.swing.JButton();

                BookBtn.setEnabled(false);

                BookBtn.setBackground(new java.awt.Color(0, 51, 51));
                BookBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                BookBtn.setForeground(new java.awt.Color(255, 255, 255));
                BookBtn.setText("Book");
                BookBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                try {
                                        bookBtnAction(evt);
                                } catch (SQLException e) {
                                        e.printStackTrace();
                                } catch (ClassNotFoundException e) {
                                        e.printStackTrace();
                                }
                        }
                });
                CancelBtn = new javax.swing.JButton();

                CancelBtn.setBackground(new java.awt.Color(0, 51, 51));
                CancelBtn.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                CancelBtn.setForeground(new java.awt.Color(255, 255, 255));
                CancelBtn.setText("Cancel");
                CancelBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                backBtnAction(evt);
                        }
                });

                javax.swing.GroupLayout groupLayoutPanel3 = new javax.swing.GroupLayout(panel3);
                groupLayoutPanel3.setHorizontalGroup(
                                groupLayoutPanel3.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.LEADING)
                                                                                                                .addComponent(firstNameLabel)
                                                                                                                .addComponent(passportNoLabel)
                                                                                                                .addComponent(LastNameLabel))
                                                                                                .addGap(56)
                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.LEADING)
                                                                                                                .addComponent(txtpassport)
                                                                                                                .addComponent(txtlastname)
                                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addComponent(txtfirstname)
                                                                                                                                .addGap(65)
                                                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                                                .createParallelGroup(
                                                                                                                                                                Alignment.LEADING)
                                                                                                                                                .addComponent(ticketNoLabel)
                                                                                                                                                .addComponent(txtticketno)))))
                                                                                .addComponent(panel2,
                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                GroupLayout.PREFERRED_SIZE)))
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addGap(52)
                                                                .addComponent(BookBtn, GroupLayout.PREFERRED_SIZE, 138,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addGap(41)
                                                                .addComponent(CancelBtn, GroupLayout.PREFERRED_SIZE,
                                                                                134, GroupLayout.PREFERRED_SIZE)));
                groupLayoutPanel3.setVerticalGroup(
                                groupLayoutPanel3.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel3.createSequentialGroup()
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addGap(52)
                                                                                                .addGroup(groupLayoutPanel3
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.BASELINE)
                                                                                                                .addComponent(firstNameLabel)
                                                                                                                .addComponent(txtfirstname)))
                                                                                .addGroup(groupLayoutPanel3
                                                                                                .createSequentialGroup()
                                                                                                .addGap(23)
                                                                                                .addComponent(ticketNoLabel)
                                                                                                .addGap(18)
                                                                                                .addComponent(txtticketno)))
                                                                .addGap(18)
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.BASELINE)
                                                                                .addComponent(LastNameLabel)
                                                                                .addComponent(txtlastname))
                                                                .addGap(41)
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.BASELINE)
                                                                                .addComponent(passportNoLabel)
                                                                                .addComponent(txtpassport))
                                                                .addGap(18)
                                                                .addComponent(panel2, GroupLayout.PREFERRED_SIZE,
                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(ComponentPlacement.RELATED, 37,
                                                                                Short.MAX_VALUE)
                                                                .addGroup(groupLayoutPanel3
                                                                                .createParallelGroup(Alignment.BASELINE)
                                                                                .addComponent(BookBtn,
                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                41,
                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                .addComponent(CancelBtn,
                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                41,
                                                                                                GroupLayout.PREFERRED_SIZE))));
                panel3.setLayout(groupLayoutPanel3);

                searchBtn.setBackground(new java.awt.Color(0, 51, 51));
                searchBtn.setForeground(new java.awt.Color(255, 255, 255));
                searchBtn.setText("Search");
                searchBtn.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                searchBtnAction(evt);
                        }
                });

                noteLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                noteLabel.setForeground(new java.awt.Color(153, 0, 51));
                noteLabel.setText(
                                "NOTE: Business class is now available only at 1.5 times the price of an economy ticket");

                javax.swing.GroupLayout groupLayoutPanel6 = new javax.swing.GroupLayout(panel6);
                groupLayoutPanel6.setHorizontalGroup(
                                groupLayoutPanel6.createParallelGroup(Alignment.TRAILING)
                                                .addGroup(groupLayoutPanel6.createSequentialGroup()
                                                                .addGroup(groupLayoutPanel6
                                                                                .createParallelGroup(Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel6
                                                                                                .createSequentialGroup()
                                                                                                .addGroup(groupLayoutPanel6
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.LEADING)
                                                                                                                .addGroup(groupLayoutPanel6
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addGap(121)
                                                                                                                                .addGroup(groupLayoutPanel6
                                                                                                                                                .createParallelGroup(
                                                                                                                                                                Alignment.LEADING)
                                                                                                                                                .addComponent(panel1,
                                                                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                                                                                .addComponent(scrollPane1,
                                                                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                                                                618,
                                                                                                                                                                GroupLayout.PREFERRED_SIZE)))
                                                                                                                .addGroup(groupLayoutPanel6
                                                                                                                                .createSequentialGroup()
                                                                                                                                .addGap(130)
                                                                                                                                .addComponent(customerIdLabel)
                                                                                                                                .addGap(18)
                                                                                                                                .addComponent(txtcustid,
                                                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                                                151,
                                                                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                                                                .addGap(18)
                                                                                                                                .addComponent(searchBtn)))
                                                                                                .addGap(109)
                                                                                                .addComponent(panel3,
                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                403,
                                                                                                                GroupLayout.PREFERRED_SIZE))
                                                                                .addGroup(groupLayoutPanel6
                                                                                                .createSequentialGroup()
                                                                                                .addContainerGap()
                                                                                                .addComponent(noteLabel,
                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                674,
                                                                                                                GroupLayout.PREFERRED_SIZE)))
                                                                .addContainerGap(269, Short.MAX_VALUE)));
                groupLayoutPanel6.setVerticalGroup(
                                groupLayoutPanel6.createParallelGroup(Alignment.LEADING)
                                                .addGroup(groupLayoutPanel6.createSequentialGroup()
                                                                .addGap(16)
                                                                .addGroup(groupLayoutPanel6
                                                                                .createParallelGroup(Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel6
                                                                                                .createSequentialGroup()
                                                                                                .addGap(27)
                                                                                                .addGroup(groupLayoutPanel6
                                                                                                                .createParallelGroup(
                                                                                                                                Alignment.BASELINE)
                                                                                                                .addComponent(txtcustid,
                                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                                                .addComponent(searchBtn)
                                                                                                                .addComponent(customerIdLabel))
                                                                                                .addPreferredGap(
                                                                                                                ComponentPlacement.RELATED,
                                                                                                                28,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addComponent(panel1,
                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                170,
                                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                                .addGap(40)
                                                                                                .addComponent(scrollPane1,
                                                                                                                GroupLayout.PREFERRED_SIZE,
                                                                                                                179,
                                                                                                                GroupLayout.PREFERRED_SIZE)
                                                                                                .addGap(53))
                                                                                .addGroup(groupLayoutPanel6
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(panel3,
                                                                                                                GroupLayout.DEFAULT_SIZE,
                                                                                                                506,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addPreferredGap(
                                                                                                                ComponentPlacement.RELATED)))
                                                                .addGap(30)
                                                                .addComponent(noteLabel, GroupLayout.PREFERRED_SIZE, 28,
                                                                                GroupLayout.PREFERRED_SIZE)));
                panel6.setLayout(groupLayoutPanel6);

                panel7.setBackground(new java.awt.Color(0, 102, 102));

                contactUsLabel.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
                contactUsLabel.setForeground(new java.awt.Color(255, 255, 255));
                contactUsLabel.setText("CONTACT US");
                contactUsLabel.setToolTipText("");

                numberLabel.setFont(new java.awt.Font("Segoe UI Light", 1, 14)); // NOI18N
                numberLabel.setForeground(new java.awt.Color(255, 255, 255));
                numberLabel.setText("+51 789543");

                jskyIcon.setIcon(
                                new javax.swing.ImageIcon(getClass().getResource("/Screenshot 2022-07-06 000042.png"))); // NOI18N

                instaIcon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/insta.png"))); // NOI18N

                linkedInIcon.setIcon(new javax.swing.ImageIcon(getClass().getResource("/twit.png"))); // NOI18N

                javax.swing.GroupLayout groupLayoutPanel7 = new javax.swing.GroupLayout(panel7);
                panel7.setLayout(groupLayoutPanel7);
                groupLayoutPanel7.setHorizontalGroup(
                                groupLayoutPanel7.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel7.createSequentialGroup()
                                                                .addGap(19, 19, 19)
                                                                .addGroup(groupLayoutPanel7.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(numberLabel)
                                                                                                .addPreferredGap(
                                                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                Short.MAX_VALUE))
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(contactUsLabel,
                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                536,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addGap(90, 90, 90)))
                                                                .addComponent(adjustBackgroundLabel1)
                                                                .addGap(157, 157, 157)
                                                                .addGroup(groupLayoutPanel7
                                                                                .createParallelGroup(
                                                                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                false)
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(adjustBackgroundLabel2)
                                                                                                .addGap(203, 203, 203))
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addComponent(linkedInIcon)
                                                                                                .addPreferredGap(
                                                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                                                .addComponent(instaIcon)
                                                                                                .addPreferredGap(
                                                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                                                44,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addComponent(jskyIcon)
                                                                                                .addGap(58, 58, 58)))));
                groupLayoutPanel7.setVerticalGroup(
                                groupLayoutPanel7.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(groupLayoutPanel7.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(contactUsLabel)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(adjustBackgroundLabel1)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)
                                                                .addComponent(numberLabel)
                                                                .addContainerGap(31, Short.MAX_VALUE))
                                                .addGroup(groupLayoutPanel7.createSequentialGroup()
                                                                .addComponent(adjustBackgroundLabel2)
                                                                .addGroup(groupLayoutPanel7.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addPreferredGap(
                                                                                                                javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                                                                .addComponent(jskyIcon))
                                                                                .addGroup(groupLayoutPanel7
                                                                                                .createSequentialGroup()
                                                                                                .addGap(23, 23, 23)
                                                                                                .addGroup(groupLayoutPanel7
                                                                                                                .createParallelGroup(
                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                .addComponent(instaIcon)
                                                                                                                .addComponent(linkedInIcon))))
                                                                .addGap(0, 18, Short.MAX_VALUE)));

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
                layout.setHorizontalGroup(
                                layout.createParallelGroup(Alignment.TRAILING)
                                                .addGroup(layout.createSequentialGroup()
                                                                .addComponent(panel6, GroupLayout.DEFAULT_SIZE, 1530,
                                                                                Short.MAX_VALUE)
                                                                .addContainerGap())
                                                .addComponent(panel5, Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 1540,
                                                                Short.MAX_VALUE)
                                                .addComponent(panel7, Alignment.LEADING, GroupLayout.DEFAULT_SIZE, 1540,
                                                                Short.MAX_VALUE));
                layout.setVerticalGroup(
                                layout.createParallelGroup(Alignment.LEADING)
                                                .addGroup(layout.createSequentialGroup()
                                                                .addComponent(panel5, GroupLayout.PREFERRED_SIZE, 118,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(ComponentPlacement.RELATED)
                                                                .addComponent(panel6, GroupLayout.PREFERRED_SIZE, 593,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(ComponentPlacement.RELATED)
                                                                .addComponent(panel7, GroupLayout.PREFERRED_SIZE, 93,
                                                                                GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(27, Short.MAX_VALUE)));
                getContentPane().setLayout(layout);

                pack();
                txtsource.addActionListener(e -> updateDestinationDropdown());
        }// </editor-fold>//GEN-END:initComponents
        
        public javax.swing.JComboBox<String> getTxtdepart() {
			return txtdepart;
		}

		public void setTxtdepart(javax.swing.JComboBox<String> txtdepart) {
			this.txtdepart = txtdepart;
		}

		public javax.swing.JComboBox<String> getTxtsource() {
			return txtsource;
		}

		public void setTxtsource(javax.swing.JComboBox<String> txtsource) {
			this.txtsource = txtsource;
		}

		/**
         * Updates the destination dropdown based on the selected source.
         * It removes the selected source from the destination dropdown and sets the updated
         * list of destinations to the destination dropdown.
         */
        public void updateDestinationDropdown() {
            // Get the selected source from the sourceText dropdown
            String selectedSource = txtsource.getSelectedItem().toString();

            // Remove the selected source from the destinationText dropdown
            DefaultComboBoxModel<String> destinationModel = new DefaultComboBoxModel<>();
            for (int i = 0; i < txtsource.getItemCount(); i++) {
                String item = txtsource.getItemAt(i).toString();

                // Add only non-selected sources to the destination dropdown
                if (!item.equals(selectedSource)) {
                    destinationModel.addElement(item);
                }
            }

            // Set the updated list of destinations to the destination dropdown
            txtdepart.setModel(destinationModel);
            setTxtdepart((JComboBox<String>) txtdepart); 
           
        }


        public javax.swing.JComboBox<String> getTxtclass() {
			return txtclass;
		}

		public void setTxtclass(javax.swing.JComboBox<String> txtclass) {
			this.txtclass = txtclass;
		}

		public javax.swing.JSpinner getTxtseats() {
			return txtseats;
		}

		public void setTxtseats(javax.swing.JSpinner txtseats) {
			this.txtseats = txtseats;
		}

		/**
         * Handle a change in the 'class' combo box selection.
         *
         * @param evt The ActionEvent triggered by the user's action.
         */
        public void txtclassStateChanged(ActionEvent evt) {
                int seats = (int) txtseats.getValue();
                String classSeat = (String) txtclass.getSelectedItem();

                if (!txtprice.getText().equals("") && seats > 0 && seats < 10) {
                        if (classSeat.equals("Business")) {
                                double bill = 1.5 * price * seats;
                                txtprice.setText(String.valueOf((int) bill));
                        } else {
                                double bill = price * seats;
                                txtprice.setText(String.valueOf((int) bill));
                        }
                }
        }
        

        public javax.swing.JLabel getTxtprice() {
			return txtprice;
		}

		public void setTxtprice(JLabel jTextField) {
			this.txtprice = jTextField;
		}

		/**
		 * @return the bookBtn
		 */
		public javax.swing.JButton getBookBtn() {
			return BookBtn;
		}

		/**
		 * @param bookBtn the bookBtn to set
		 */
		public void setBookBtn(javax.swing.JButton bookBtn) {
			BookBtn = bookBtn;
		}

		/**
         * Handle a change in the 'seats' spinner state.
         *
         * @param evt The ChangeEvent triggered by the user's action.
         */
        private void txtseatsStateChanged(ChangeEvent evt) {
                int seats = (int) txtseats.getValue();
                String classSeat = (String) txtclass.getSelectedItem();

                if (!txtprice.getText().equals("") && seats > 0 && seats < 10) {

                        if (classSeat.equals("Business")) {
                                double bill = 1.5 * price * seats;
                                txtprice.setText(String.valueOf((int) bill));
                        } else {
                                double bill = price * seats;
                                txtprice.setText(String.valueOf((int) bill));
                        }
                }
        }
        
        public javax.swing.JLabel getTxtpassport() {
			return txtpassport;
		}

		public void setTxtpassport(javax.swing.JLabel txtpassport) {
			this.txtpassport = txtpassport;
		}

		public javax.swing.JButton getSeachBtn() {
			return seachBtn;
		}

		public void setSeachBtn(javax.swing.JButton seachBtn) {
			this.seachBtn = seachBtn;
		}

		public javax.swing.JButton getSearchBtn() {
			return searchBtn;
		}

		public void setSearchBtn(javax.swing.JButton searchBtn) {
			this.searchBtn = searchBtn;
		}

		public com.toedter.calendar.JDateChooser getTxtdate() {
			return txtdate;
		}

		public void setTxtdate(com.toedter.calendar.JDateChooser txtdate) {
			this.txtdate = txtdate;
		}

		/**
         * Disables dates earlier than the current date in a JDateChooser component.
         * Displays a dialog box if the user tries to select a past date.
         *
         * @param dateChooser The JDateChooser component for which to disable past dates.
         */
        public void disablePastDates(final JDateChooser dateChooser) {
            // Get the current date
            Date currentDate = new Date();

            // Set the minimum selectable date to the current date
            dateChooser.setDate(currentDate);

            // Disable the date cells before the current date in the calendar
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(currentDate);

            // Set the lower bound for the date cells
            dateChooser.addPropertyChangeListener("date", new PropertyChangeListener() {
                @Override
                public void propertyChange(PropertyChangeEvent e) {
                    if ("date".equals(e.getPropertyName())) {
                        Date selectedDate = (Date) e.getNewValue();
                        if (selectedDate != null && selectedDate.before(calendar.getTime())) {
                            // Display a dialog box notifying the user
                            JOptionPane.showMessageDialog(
                                    null,
                                    "Please select a date equal to or after the current date.",
                                    "Invalid Date",
                                    JOptionPane.WARNING_MESSAGE);

                            // Reset the date to the current date
                            dateChooser.setDate(calendar.getTime());
                        }
                    }
                }
            });
        }
        
        

        /**
         * Handle the button click event to search for a customer by ID.
         *
         * @param evt The ActionEvent triggered by the button click.
         */

        public void searchBtnAction(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_searchBtnAction
                // TODO add your handling code here:
                String id = txtcustid.getText();

                try {
                        con = connectionManager.getConnection();
                        pst = con.prepareStatement("select * from customer where id = ?");
                        pst.setString(1, id);
                        ResultSet rs = pst.executeQuery();

                        if (rs.next() == false) {
                                JOptionPane.showMessageDialog(this, "Record not Found");

                        } else {
                                String fname = rs.getString("firstname");
                                String lname = rs.getString("lastname");

                                String passport = rs.getString("passport");

                                txtfirstname.setText(fname.trim());
                                txtlastname.setText(lname.trim());

                                txtpassport.setText(passport.trim());
                                searchBtn.setEnabled(false);
                                txtcustid.setEditable(false);

                                txtsource.setEnabled(true);
                                txtdepart.setEnabled(true);
                                seachBtn.setEnabled(true);
                                txtdate.setEnabled(true);

                        }

                } catch (SQLException ex) {
                        Logger.getLogger(ticket.class.getName()).log(Level.SEVERE, null, ex);
                }
        }// GEN-LAST:event_searchBtnAction

        public javax.swing.JLabel getFlightnamelabel() {
			return flightnamelabel;
		}

		public void setFlightnamelabel(javax.swing.JLabel flightnamelabel) {
			this.flightnamelabel = flightnamelabel;
		}

		public javax.swing.JTable getTicketTable() {
			return ticketTable;
		}

		public void setTicketTable(javax.swing.JTable ticketTable) {
			this.ticketTable = ticketTable;
		}

		/**
         * Handle the button click event to search for available flights based on source
         * and destination.
         *
         * @param evt The ActionEvent triggered by the button click.
         */
        public void checkAvailableFlightBtnAction(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_checkAvailableFlightBtnAction
                // TODO add your handling code here:

                String source = txtsource.getSelectedItem().toString().trim();
                String depart = txtdepart.getSelectedItem().toString().trim();

                try {
                        con = connectionManager.getConnection();
                        pst = con.prepareStatement("SELECT * from flight WHERE source = ? and depart = ?");

                        pst.setString(1, source);
                        pst.setString(2, depart);
                        ResultSet rs = pst.executeQuery();

                        ResultSetMetaData rsm = rs.getMetaData();
                        int c;
                        c = rsm.getColumnCount();

                        DefaultTableModel Df = (DefaultTableModel) ticketTable.getModel();
                        ticketTable.setDefaultEditor(Object.class, null);
                        Df.setRowCount(0);

                        while (rs.next()) {
                                arrivaltime = rs.getString("arrtime");
                                flightname = rs.getString("flightname");
                                departTime = rs.getString("deptime");
                                sourceCity = rs.getString("source");
                                departCity = rs.getString("depart");
                                Vector<String> vectorArray = new Vector<String>();

                                for (int i = 1; i <= c; i++) {
                                        vectorArray.add(rs.getString("id"));
                                        vectorArray.add(rs.getString("flightname"));
                                        vectorArray.add(rs.getString("source"));
                                        vectorArray.add(rs.getString("depart"));
                                        vectorArray.add(rs.getString("deptime"));
                                        vectorArray.add(rs.getString("arrtime"));
                                        vectorArray.add(rs.getString("flightcharge"));
                                }
                                Df.addRow(vectorArray);
                        }

                } catch (SQLException ex) {
                        Logger.getLogger(ticket.class.getName()).log(Level.SEVERE, null, ex);
                }

        }// GEN-LAST:event_checkAvailableFlightBtnAction
        
        

        /**
		 * @return the txtdept
		 */
		public javax.swing.JLabel getTxtdept() {
			return txtdept;
		}

		/**
		 * @param txtdept the txtdept to set
		 */
		public void setTxtdept(javax.swing.JLabel txtdept) {
			this.txtdept = txtdept;
		}

		

		/**
		 * @return the firstNameLabel
		 */
		public javax.swing.JLabel getFirstNameLabel() {
			return firstNameLabel;
		}

		/**
		 * @param firstNameLabel the firstNameLabel to set
		 */
		public void setFirstNameLabel(javax.swing.JLabel firstNameLabel) {
			this.firstNameLabel = firstNameLabel;
		}

		public javax.swing.JLabel getFlightno() {
			return flightno;
		}

		/**
		 * @return the priceLabel
		 */
		public javax.swing.JLabel getPriceLabel() {
			return priceLabel;
		}

		/**
		 * @param priceLabel the priceLabel to set
		 */
		public void setPriceLabel(javax.swing.JLabel priceLabel) {
			this.priceLabel = priceLabel;
		}

		/**
		 * @return the price
		 */
		public int getPrice() {
			return price;
		}

		/**
		 * @param price the price to set
		 */
		public void setPrice(int price) {
			this.price = price;
		}

		public void setFlightno(javax.swing.JLabel flightno) {
			this.flightno = flightno;
		}

		/**
		 * @return the txtticketno
		 */
		public javax.swing.JLabel getTxtticketno() {
			return txtticketno;
		}

		/**
		 * @param txtticketno the txtticketno to set
		 */
		public void setTxtticketno(javax.swing.JLabel txtticketno) {
			this.txtticketno = txtticketno;
		}

		/**
         * Handle a mouse click event on the flight selection table.
         *
         * @param evt The MouseEvent triggered by the mouse click.
         */
        public void flightsTableMouseClicked(java.awt.event.MouseEvent evt) {// GEN-FIRST:event_flightsTableMouseClicked
                // TODO add your handling code here:

                DefaultTableModel Df = (DefaultTableModel) ticketTable.getModel();

                int selectIndex = ticketTable.getSelectedRow();

                price = Integer.parseInt((String) Df.getValueAt(selectIndex, 6));

                flightno.setText(Df.getValueAt(selectIndex, 0).toString());
                flightnamelabel.setText(Df.getValueAt(selectIndex, 1).toString());
                txtdept.setText(Df.getValueAt(selectIndex, 4).toString());
                txtprice.setText(Df.getValueAt(selectIndex, 6).toString());
                txtseats.setEnabled(true);
                txtclass.setEnabled(true);
                BookBtn.setEnabled(true);

        }// GEN-LAST:event_flightsTableMouseClicked

        /**
         * Handle the button click event to book a ticket.
         *
         * @param evt The ActionEvent triggered by the button click.
         * @throws SQLException           If a SQL-related error occurs.
         * @throws ClassNotFoundException If the required class is not found.
         */
        public void bookBtnAction(java.awt.event.ActionEvent evt) throws SQLException, ClassNotFoundException {// GEN-FIRST:event_bookBtnAction
                // TODO add your handling code here:

                String ticketid = txtticketno.getText();
                String flightid = flightno.getText();
                String custid = txtcustid.getText();
                String flightclass = txtclass.getSelectedItem().toString().trim();
                String seats = txtseats.getValue().toString();

                DateFormat da = new SimpleDateFormat("yyyy-MM-dd");

                if (seats.equals("") || Integer.parseInt(seats) < 1 || Integer.parseInt(seats) > 9) {
                        JOptionPane.showMessageDialog(this, "Seats must be between 1-9");
                } else {
                        try {
                                String date = da.format(txtdate.getDate());

                                SimpleDateFormat df = new SimpleDateFormat("yyyy");
                                String year = df.format(txtdate.getDate());
                                int yr = Integer.parseInt(year);
                                if (!(yr == 2024)) {
                                        JOptionPane.showMessageDialog(this, "Can only book for the current year");
                                } else {
                                        con = connectionManager.getConnection();
                                        pst = con.prepareStatement(
                                                        "insert into ticket(id,flightid,flightname,custid,firstname,lastname,passport,class,price,seats,date,deptime,arrtime,source,depart)values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

                                        pst.setString(1, ticketid);
                                        pst.setString(2, flightid);
                                        pst.setString(3, flightname);
                                        pst.setString(4, custid);
                                        pst.setString(5, txtfirstname.getText());
                                        pst.setString(6, txtlastname.getText());
                                        pst.setString(7, txtpassport.getText());
                                        pst.setString(8, flightclass);
                                        pst.setString(9, txtprice.getText());

                                        pst.setString(10, seats);
                                        pst.setString(11, date);
                                        pst.setString(12, departTime);
                                        pst.setString(13, arrivaltime);
                                        pst.setString(14, sourceCity);
                                        pst.setString(15, departCity);
                                        pst.executeUpdate();

                                        JOptionPane.showMessageDialog(null, "Ticket Booked");
                                        this.dispose();
                                        billObj = new bill(custid, ticketid);
                                        billObj.setVisible(true);
                                }
                        } catch (ClassNotFoundException | SQLException ex) {
                                Logger.getLogger(addflight.class.getName()).log(Level.SEVERE, null, ex);
                        } catch (NullPointerException e) {
                                JOptionPane.showMessageDialog(this, "Please enter the Date");
                        } finally {
                                try {
                                        if (con != null) {
                                                con.close();
                                        }
                                        if (pst != null) {
                                                pst.close();
                                        }
                                } catch (SQLException ex) {
                                        ex.printStackTrace();
                                }
                        }
                }
        }// GEN-LAST:event_bookBtnAction

        /**
         * Handle the button click event to go back to the customer domain.
         *
         * @param evt The ActionEvent triggered by the button click.
         */
        private void backBtnAction(java.awt.event.ActionEvent evt) {// GEN-FIRST:event_backBtnAction
                // TODO add your handling code here:

                this.dispose();
                cusDomainObj = new cusdomain();
                cusDomainObj.setVisible(true);

        }// GEN-LAST:event_backBtnAction

        /**
         * Generate an auto-generated ticket ID based on the existing data.
         */
        public void autoID() {
                try {
                        con = connectionManager.getConnection();
                        Statement s = con.createStatement();
                        ResultSet rs = s.executeQuery("select MAX(id) from ticket");
                        rs.next();
                        rs.getString("MAX(id)");
                        if (rs.getString("MAX(id)") == null) {
                                txtticketno.setText("TO001");
                        } else {
                                long id = Long.parseLong(
                                                rs.getString("MAX(id)").substring(2, rs.getString("MAX(id)").length()));
                                id++;
                                txtticketno.setText("TO" + String.format("%03d", id));
                        }
                } catch (SQLException ex) {
                        Logger.getLogger(addCustomer.class.getName()).log(Level.SEVERE, null, ex);
                }
        }

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JLabel flightnamelabel;
        private javax.swing.JLabel flightno;
        private javax.swing.JButton BookBtn;
        private javax.swing.JButton CancelBtn;
        private javax.swing.JButton seachBtn;
        private javax.swing.JButton searchBtn;
        private javax.swing.JLabel sourceLabel;
        private javax.swing.JLabel noteLabel;
        private javax.swing.JLabel flightNoLabel;
        private javax.swing.JLabel flightNameLabel;
        private javax.swing.JLabel departureTimeLabel;
        private javax.swing.JLabel classLabel;
        private javax.swing.JLabel priceLabel;
        private javax.swing.JLabel seatsLabel;
        private javax.swing.JLabel contactUsLabel;
        private javax.swing.JLabel departureLabel;
        private javax.swing.JLabel ticketNoLabel;
        private javax.swing.JLabel numberLabel;
        private javax.swing.JLabel adjustBackgroundLabel1;
        private javax.swing.JLabel adjustBackgroundLabel2;
        private javax.swing.JLabel jskyIcon;
        private javax.swing.JLabel instaIcon;
        private javax.swing.JLabel linkedInIcon;
        private javax.swing.JLabel findMyFlightLabel;
        private javax.swing.JLabel customerIdLabel;
        private javax.swing.JLabel firstNameLabel;
        private javax.swing.JLabel LastNameLabel;
        private javax.swing.JLabel passportNoLabel;
        private javax.swing.JLabel dateLabel;
        private javax.swing.JPanel panel1;
        private javax.swing.JPanel panel2;
        private javax.swing.JPanel panel3;
        private javax.swing.JPanel panel5;
        private javax.swing.JPanel panel6;
        private javax.swing.JPanel panel7;
        private javax.swing.JScrollPane scrollPane1;
        private javax.swing.JTable ticketTable;
        private javax.swing.JComboBox<String> txtclass;
        private javax.swing.JTextField txtcustid;
        private com.toedter.calendar.JDateChooser txtdate;
        private javax.swing.JComboBox<String> txtdepart;
        private javax.swing.JLabel txtdept;
        private javax.swing.JLabel txtfirstname;
        private javax.swing.JLabel txtlastname;
        private javax.swing.JLabel txtpassport;
        private JLabel txtprice;
        private javax.swing.JSpinner txtseats;
        private javax.swing.JComboBox<String> txtsource;
        private javax.swing.JLabel txtticketno;
        private String departTime, arrivaltime, sourceCity, departCity, flightname;
        private int price;
        public javax.swing.JTextField getTxtcustid() {
			return txtcustid;
		}

		public void setTxtcustid(javax.swing.JTextField txtcustid) {
			this.txtcustid = txtcustid;
		}

		public javax.swing.JLabel getTxtfirstname() {
			return txtfirstname;
		}

		public void setTxtfirstname(javax.swing.JLabel txtfirstname) {
			this.txtfirstname = txtfirstname;
		}

		public javax.swing.JLabel getTxtlastname() {
			return txtlastname;
		}

		public void setTxtlastname(javax.swing.JLabel txtlastname) {
			this.txtlastname = txtlastname;
		}

		private bill billObj;
        private cusdomain cusDomainObj;
        // End of variables declaration//GEN-END:variables

		public void setConnection(Connection mockConnection) throws SQLException {
			mockConnection = connectionManager.getConnection();
			
		}
}
